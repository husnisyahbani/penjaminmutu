<!-- Core  -->
<script src="<?php echo asset_url();?>global/vendor/babel-external-helpers/babel-external-helpers.js"></script>
<script src="<?php echo asset_url();?>global/vendor/jquery/jquery.js"></script>
<script src="<?php echo asset_url();?>global/vendor/popper-js/umd/popper.min.js"></script>
<script src="<?php echo asset_url();?>global/vendor/bootstrap/bootstrap.js"></script>
<script src="<?php echo asset_url();?>global/vendor/animsition/animsition.js"></script>
<script src="<?php echo asset_url();?>global/vendor/mousewheel/jquery.mousewheel.js"></script>
<script src="<?php echo asset_url();?>global/vendor/asscrollbar/jquery-asScrollbar.js"></script>
<script src="<?php echo asset_url();?>global/vendor/asscrollable/jquery-asScrollable.js"></script>
<script src="<?php echo asset_url();?>global/vendor/waves/waves.js"></script>

<!-- Plugins -->
<script src="<?php echo asset_url();?>global/vendor/jquery-mmenu/jquery.mmenu.min.all.js"></script>
<script src="<?php echo asset_url();?>global/vendor/switchery/switchery.js"></script>
<script src="<?php echo asset_url();?>global/vendor/intro-js/intro.js"></script>
<script src="<?php echo asset_url();?>global/vendor/screenfull/screenfull.js"></script>
<script src="<?php echo asset_url();?>global/vendor/slidepanel/jquery-slidePanel.js"></script>
<script src="<?php echo asset_url();?>global/vendor/chartist/chartist.min.js"></script>
<script src="<?php echo asset_url();?>global/vendor/chartist-plugin-tooltip/chartist-plugin-tooltip.js"></script>
<script src="<?php echo asset_url();?>global/vendor/jvectormap/jquery-jvectormap.min.js"></script>
<script src="<?php echo asset_url();?>global/vendor/jvectormap/maps/jquery-jvectormap-world-mill-en.js"></script>
<script src="<?php echo asset_url();?>global/vendor/matchheight/jquery.matchHeight-min.js"></script>
<script src="<?php echo asset_url();?>global/vendor/peity/jquery.peity.min.js"></script>
<script src="<?php echo asset_url();?>global/vendor/owl-carousel/owl.carousel.js"></script>
<script src="<?php echo asset_url();?>global/vendor/slick-carousel/slick.js"></script>
<script src="<?php echo asset_url();?>global/vendor/datatables.net/jquery.dataTables.js"></script>
<script src="<?php echo asset_url();?>global/vendor/datatables.net-bs4/dataTables.bootstrap4.js"></script>
<script src="<?php echo asset_url();?>global/vendor/datatables.net-fixedheader/dataTables.fixedHeader.js"></script>
<script src="<?php echo asset_url();?>global/vendor/datatables.net-fixedcolumns/dataTables.fixedColumns.js"></script>
<script src="<?php echo asset_url();?>global/vendor/datatables.net-rowgroup/dataTables.rowGroup.js"></script>
<script src="<?php echo asset_url();?>global/vendor/datatables.net-scroller/dataTables.scroller.js"></script>
<script src="<?php echo asset_url();?>global/vendor/datatables.net-responsive/dataTables.responsive.js"></script>
<script src="<?php echo asset_url();?>global/vendor/datatables.net-responsive-bs4/responsive.bootstrap4.js"></script>
<script src="<?php echo asset_url();?>global/vendor/datatables.net-buttons/dataTables.buttons.js"></script>
<script src="<?php echo asset_url();?>global/vendor/datatables.net-buttons/buttons.html5.js"></script>
<script src="<?php echo asset_url();?>global/vendor/datatables.net-buttons/buttons.flash.js"></script>
<script src="<?php echo asset_url();?>global/vendor/datatables.net-buttons/buttons.print.js"></script>
<script src="<?php echo asset_url();?>global/vendor/datatables.net-buttons/buttons.colVis.js"></script>
<script src="<?php echo asset_url();?>global/vendor/datatables.net-buttons-bs4/buttons.bootstrap4.js"></script>
<script src="<?php echo asset_url();?>global/vendor/asrange/jquery-asRange.min.js"></script>
<script src="<?php echo asset_url();?>global/vendor/bootbox/bootbox.js"></script>
<script src="<?php echo asset_url();?>global/vendor/jquery-ui/jquery-ui.js"></script>
<script src="<?php echo asset_url();?>global/vendor/blueimp-tmpl/tmpl.js"></script>
<script src="<?php echo asset_url();?>global/vendor/blueimp-canvas-to-blob/canvas-to-blob.js"></script>
<script src="<?php echo asset_url();?>global/vendor/blueimp-load-image/load-image.all.min.js"></script>
<script src="<?php echo asset_url();?>global/vendor/blueimp-file-upload/jquery.fileupload.js"></script>
<script src="<?php echo asset_url();?>global/vendor/blueimp-file-upload/jquery.fileupload-process.js"></script>
<script src="<?php echo asset_url();?>global/vendor/blueimp-file-upload/jquery.fileupload-image.js"></script>
<script src="<?php echo asset_url();?>global/vendor/blueimp-file-upload/jquery.fileupload-audio.js"></script>
<script src="<?php echo asset_url();?>global/vendor/blueimp-file-upload/jquery.fileupload-video.js"></script>
<script src="<?php echo asset_url();?>global/vendor/blueimp-file-upload/jquery.fileupload-validate.js"></script>
<script src="<?php echo asset_url();?>global/vendor/blueimp-file-upload/jquery.fileupload-ui.js"></script>
<script src="<?php echo asset_url();?>global/vendor/dropify/dropify.min.js"></script>
<script src="<?php echo asset_url();?>global/vendor/formvalidation/formValidation.min.js"></script>
<script src="<?php echo asset_url();?>global/vendor/formvalidation/framework/bootstrap4.min.js"></script>
<script src="<?php echo asset_url();?>global/vendor/summernote/summernote.min.js"></script>
<script src="<?php echo asset_url(); ?>global/vendor/toastr/toastr.js"></script>
<script src="<?php echo asset_url(); ?>global/vendor/bootstrap-datepicker/bootstrap-datepicker.js"></script>

<!-- Scripts -->
<script src="<?php echo asset_url();?>global/js/Component.js"></script>
<script src="<?php echo asset_url();?>global/js/Plugin.js"></script>
<script src="<?php echo asset_url();?>global/js/Base.js"></script>
<script src="<?php echo asset_url();?>global/js/Config.js"></script>

<script src="<?php echo asset_url();?>assets/js/Section/Menubar.js"></script>
<script src="<?php echo asset_url();?>assets/js/Section/Sidebar.js"></script>
<script src="<?php echo asset_url();?>assets/js/Section/PageAside.js"></script>
<script src="<?php echo asset_url();?>assets/js/Section/GridMenu.js"></script>
<script src="<?php echo asset_url() . 'assets/js/Plugin/menu.js'; ?>"></script>


<!-- Config -->
<script src="<?php echo asset_url();?>global/js/config/colors.js"></script>
<script src="<?php echo asset_url();?>assets/js/config/tour.js"></script>
<script>Config.set('assets', '../assets');</script>

<!-- Page -->
<script src="<?php echo asset_url();?>assets/js/Site.js"></script>
<script src="<?php echo asset_url();?>global/js/Plugin/asscrollable.js"></script>
<script src="<?php echo asset_url();?>global/js/Plugin/slidepanel.js"></script>
<script src="<?php echo asset_url();?>global/js/Plugin/switchery.js"></script>
<script src="<?php echo asset_url();?>global/js/Plugin/matchheight.js"></script>
<script src="<?php echo asset_url();?>global/js/Plugin/jvectormap.js"></script>
<script src="<?php echo asset_url();?>global/js/Plugin/peity.js"></script>
<script src="<?php echo asset_url();?>global/js/Plugin/datatables.js"></script>
<script src="<?php echo asset_url();?>assets/examples/js/tables/datatable.js"></script>
<script src="<?php echo asset_url();?>assets/examples/js/uikit/icon.js"></script>
<script src="<?php echo asset_url();?>global/js/Plugin/sweetalert2.min.js"></script>
<script src="<?php echo asset_url();?>global/js/Plugin/summernote.js"></script>
<script src="<?php echo asset_url();?>assets/examples/js/forms/editor-summernote.js"></script>
<script src="<?php echo asset_url();?>assets/examples/js/dashboard/v1.js"></script>
    
    <script>
     $(function () {
         
         <?php
if (isset($pesanberhasil)) {
    echo "toastr.options.timeOut = 'false';
        toastr.options.closeButton = true;
        toastr.options.positionClass = 'toast-top-right';
toastr['success']('" . $pesanberhasil . "');";
}
?>
<?php
if (isset($pesanerror)) {
    echo "toastr.options.timeOut = 'false';
        toastr.options.closeButton = true;
        toastr.options.positionClass = 'toast-top-right';
toastr['error']('" . $pesanerror . "');";
}
?>
     });
      (function(document, window, $){
        'use strict';
    
        var Site = window.Site;
        $(document).ready(function(){
            
          Site.run();
          
        });
      })(document, window, jQuery);
    </script>
    
    
    <script type="text/javascript">
        var base_url = '<?php echo base_url(); ?>';
        var provinsi = '';
        var kecamatan = '';
        var kelurahan = '';
        
        $('#formaddtimses').formValidation({
        framework: "bootstrap4",
        button: {
            selector: '#validateButton',
            disabled: 'disabled'
        },
        icon: null,
        fields: {
            
           upload_file: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            tms_nama: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            tms_alamat: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            tms_nik: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            tms_provinces_id: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            tms_regencies_id: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            tms_districts_id: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            tms_villages_id: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },tms_hp: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },tms_grp_id: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            tms_tps: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            }

        },
        err: {
            clazz: 'invalid-feedback'
        },
        control: {
            // The CSS class for valid control
            valid: 'is-valid',
            // The CSS class for invalid control
            invalid: 'is-invalid'
        },
        row: {
            invalid: 'has-danger'
        }
    });

    $('#formaddsaksi').formValidation({
        framework: "bootstrap4",
        button: {
            selector: '#validateButton',
            disabled: 'disabled'
        },
        icon: null,
        fields: {
            
           upload_file: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            saksi_nama: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            saksi_alamat: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            saksi_nik: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            saksi_provinces_id: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            saksi_regencies_id: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            saksi_districts_id: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            saksi_villages_id: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },saksi_hp: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            },
            saksi_tps: {
                validators: {
                    notEmpty: {
                        message: 'Wajib Diisi'
                    }
                }
            }

        },
        err: {
            clazz: 'invalid-feedback'
        },
        control: {
            // The CSS class for valid control
            valid: 'is-valid',
            // The CSS class for invalid control
            invalid: 'is-invalid'
        },
        row: {
            invalid: 'has-danger'
        }
    });
    
    var ptn_provinces = "";
    var ptn_regencies = "";
    var ptn_districs = "";
    var ptn_villages = "";
    var tms_grp_id="";


    $('#tms_provinces_id').on('change', function () {
        ptn_provinces = $(this).val();
        if (ptn_provinces)
        {
            $.ajax({
                type: "POST",
                dataType: 'json',
                url: base_url + "umum/daftar/kota/" + ptn_provinces, // target element(s) to be updated with server response
                cache: false,
                success: function (data) {
                    var list = data == null ? [] : (data instanceof Array ? data : [data]);
                    $('#tms_regencies_id').empty();
                    $('#tms_regencies_id').append('<option value="">-- Pilih Kota --</option>');
                    $.each(list, function (index, org_types) {
                        var content = '<option value="' + org_types.id + '">' + org_types.name + '</option>';
                        $('#tms_regencies_id').append(content);
                    });
                    if (kota != '') {
                        $("#tms_regencies_id").val(kota);  
                    }
                }
            });
        }else{
            $('#tms_regencies_id').empty();
            $('#tms_regencies_id').append('<option value="">-- Pilih Kota --</option>');
        }
    });

    if (provinsi != '') {
        $('#tms_provinces_id').trigger('change');
    }
    
    $('#tms_regencies_id').on('change', function () {
        ptn_regencies = $(this).val();
        if (ptn_regencies)
        {
            $.ajax({
                type: "POST",
                dataType: 'json',
                url: base_url + "umum/daftar/kecamatan/" + ptn_regencies, // target element(s) to be updated with server response
                cache: false,
                success: function (data) {
                    var list = data == null ? [] : (data instanceof Array ? data : [data]);
                    $('#tms_districts_id').empty();
                    $('#tms_districts_id').append('<option value="">-- Pilih Kecamatan --</option>');
                    $.each(list, function (index, org_types) {
                        var content = '<option value="' + org_types.id + '">' + org_types.name + '</option>';
                        $('#tms_districts_id').append(content);
                    });
                    if (kecamatan != '') {
                        $("#tms_districts_id").val(kecamatan);  
                    }
                    
                    $.ajax({
                        type: "POST",
                        dataType: 'json',
                        url: base_url + "umum/daftar/grouptimses/" + ptn_regencies, // target element(s) to be updated with server response
                        cache: false,
                        success: function (data) {
                            var list = data == null ? [] : (data instanceof Array ? data : [data]);
                            $('#tms_grp_id').empty();
                            $('#tms_grp_id').append('<option value="">-- Pilih Group Timses --</option>');
                            $.each(list, function (index, org_types) {
                                var content = '<option value="' + org_types.grp_id + '">' + org_types.grp_nama + '</option>';
                                $('#tms_grp_id').append(content);
                            });
                            if (grouptimses != '') {
                                $("#tms_grp_id").val(grouptimses);  
                            }
                        }
                    });
                    
                }
            });
        }else{
            $('#tms_districts_id').empty();
            $('#tms_districts_id').append('<option value="">-- Pilih Kecamatan --</option>');
        }
    });

    if (kecamatan != '') {
        $('#tms_regencies_id').trigger('change');
    }
    
    
    $('#tms_grp_id').on('change', function () {
        tms_grp_id = $("#tms_grp_id").val();
        if (!tms_grp_id)
        {
            $('#tms_grp_id').empty();
            $('#tms_grp_id').append('<option value="">-- Pilih Group Timses --</option>');
        }
    });
        
    $('#tms_districts_id').on('change', function () {
        ptn_districs = $(this).val();
        if (ptn_districs)
        {
            $.ajax({
                type: "POST",
                dataType: 'json',
                url: base_url + "umum/daftar/kelurahan/" + ptn_districs, // target element(s) to be updated with server response
                cache: false,
                success: function (data) {
                    var list = data == null ? [] : (data instanceof Array ? data : [data]);
                    $('#tms_villages_id').empty();
                    $('#tms_villages_id').append('<option value="">-- Pilih Kelurahan --</option>');
                    $.each(list, function (index, org_types) {
                        var content = '<option value="' + org_types.id + '">' + org_types.name + '</option>';
                        $('#tms_villages_id').append(content);
                    });
                    if (kelurahan != '') {
                        $("#tms_villages_id").val(kelurahan);  
                    }
                }
            });
        }else{
            $('#tms_villages_id').empty();
            $('#tms_villages_id').append('<option value="">-- Pilih Kelurahan --</option>');
        }
    });

    if (kelurahan != '') {
        $('#tms_districts_id').trigger('change');
    }
    
    $('#tms_villages_id').on('change', function () {
        ptn_villages = $(this).val();
        if (ptn_villages)
        {
            $.ajax({
                type: "POST",
                dataType: 'json',
                url: base_url + "umum/daftar/tps/" + ptn_villages, // target element(s) to be updated with server response
                cache: false,
                success: function (data) {
                    var list = data == null ? [] : (data instanceof Array ? data : [data]);
                    $('#tms_tps').empty();
                    $('#tms_tps').append('<option value="">-- Pilih TPS --</option>');
                    $.each(list, function (index, org_types) {
                        var content = '<option value="' + org_types.dpt_tps + '">' + org_types.dpt_tps + '</option>';
                        $('#tms_tps').append(content);
                    });
                }
            });
        }else{
            $('#tms_tps').empty();
            $('#tms_tps').append('<option value="">-- Pilih TPS --</option>');
        }
    });


    $('#saksi_provinces_id').on('change', function () {
        ptn_provinces = $(this).val();
        if (ptn_provinces)
        {
            $.ajax({
                type: "POST",
                dataType: 'json',
                url: base_url + "umum/daftarsaksi/kota/" + ptn_provinces, // target element(s) to be updated with server response
                cache: false,
                success: function (data) {
                    var list = data == null ? [] : (data instanceof Array ? data : [data]);
                    $('#saksi_regencies_id').empty();
                    $('#saksi_regencies_id').append('<option value="">-- Pilih Kota --</option>');
                    $.each(list, function (index, org_types) {
                        var content = '<option value="' + org_types.id + '">' + org_types.name + '</option>';
                        $('#saksi_regencies_id').append(content);
                    });
                    if (kota != '') {
                        $("#saksi_regencies_id").val(kota);  
                    }
                }
            });
        }else{
            $('#saksi_regencies_id').empty();
            $('#saksi_regencies_id').append('<option value="">-- Pilih Kota --</option>');
        }
    });

    if (provinsi != '') {
        $('#saksi_provinces_id').trigger('change');
    }
    
    $('#saksi_regencies_id').on('change', function () {
        ptn_regencies = $(this).val();
        if (ptn_regencies)
        {
            $.ajax({
                type: "POST",
                dataType: 'json',
                url: base_url + "umum/daftarsaksi/kecamatan/" + ptn_regencies, // target element(s) to be updated with server response
                cache: false,
                success: function (data) {
                    var list = data == null ? [] : (data instanceof Array ? data : [data]);
                    $('#saksi_districts_id').empty();
                    $('#saksi_districts_id').append('<option value="">-- Pilih Kecamatan --</option>');
                    $.each(list, function (index, org_types) {
                        var content = '<option value="' + org_types.id + '">' + org_types.name + '</option>';
                        $('#saksi_districts_id').append(content);
                    });
                    if (kecamatan != '') {
                        $("#saksi_districts_id").val(kecamatan);  
                    }
                    
                    $.ajax({
                        type: "POST",
                        dataType: 'json',
                        url: base_url + "umum/daftarsaksi/grouptimses/" + ptn_regencies, // target element(s) to be updated with server response
                        cache: false,
                        success: function (data) {
                            var list = data == null ? [] : (data instanceof Array ? data : [data]);
                            $('#saksi_grp_id').empty();
                            $('#saksi_grp_id').append('<option value="">-- Pilih Group Timses --</option>');
                            $.each(list, function (index, org_types) {
                                var content = '<option value="' + org_types.grp_id + '">' + org_types.grp_nama + '</option>';
                                $('#saksi_grp_id').append(content);
                            });
                            if (grouptimses != '') {
                                $("#saksi_grp_id").val(grouptimses);  
                            }
                        }
                    });
                    
                }
            });
        }else{
            $('#saksi_districts_id').empty();
            $('#saksi_districts_id').append('<option value="">-- Pilih Kecamatan --</option>');
        }
    });

    if (kecamatan != '') {
        $('#saksi_regencies_id').trigger('change');
    }
    
    
    $('#saksi_grp_id').on('change', function () {
        saksi_grp_id = $("#saksi_grp_id").val();
        if (!saksi_grp_id)
        {
            $('#saksi_grp_id').empty();
            $('#saksi_grp_id').append('<option value="">-- Pilih Group Timses --</option>');
        }
    });
        
    $('#saksi_districts_id').on('change', function () {
        ptn_districs = $(this).val();
        if (ptn_districs)
        {
            $.ajax({
                type: "POST",
                dataType: 'json',
                url: base_url + "umum/daftarsaksi/kelurahan/" + ptn_districs, // target element(s) to be updated with server response
                cache: false,
                success: function (data) {
                    var list = data == null ? [] : (data instanceof Array ? data : [data]);
                    $('#saksi_villages_id').empty();
                    $('#saksi_villages_id').append('<option value="">-- Pilih Kelurahan --</option>');
                    $.each(list, function (index, org_types) {
                        var content = '<option value="' + org_types.id + '">' + org_types.name + '</option>';
                        $('#saksi_villages_id').append(content);
                    });
                    if (kelurahan != '') {
                        $("#saksi_villages_id").val(kelurahan);  
                    }
                }
            });
        }else{
            $('#saksi_villages_id').empty();
            $('#saksi_villages_id').append('<option value="">-- Pilih Kelurahan --</option>');
        }
    });

    if (kelurahan != '') {
        $('#saksi_districts_id').trigger('change');
    }
    
    $('#saksi_villages_id').on('change', function () {
        ptn_villages = $(this).val();
        if (ptn_villages)
        {
            $.ajax({
                type: "POST",
                dataType: 'json',
                url: base_url + "umum/daftarsaksi/tps/" + ptn_villages, // target element(s) to be updated with server response
                cache: false,
                success: function (data) {
                    var list = data == null ? [] : (data instanceof Array ? data : [data]);
                    $('#saksi_tps').empty();
                    $('#saksi_tps').append('<option value="">-- Pilih TPS --</option>');
                    $.each(list, function (index, org_types) {
                        var content = '<option value="' + org_types.dpt_tps + '">' + org_types.dpt_tps + '</option>';
                        $('#saksi_tps').append(content);
                    });
                }
            });
        }else{
            $('#saksi_tps').empty();
            $('#saksi_tps').append('<option value="">-- Pilih TPS --</option>');
        }
    });

    function hapus($id)
    {
        swal.fire({
            title: "Anda Yakin?",
            text: "Anda Yakin Ingin Menghapus Tim Sukses Ini?",
            type: "warning",
            showCancelButton: true,
            showLoaderOnConfirm: true,
            confirmButtonText: "Ya, Hapus!",
            cancelButtonText: 'Tidak',
            preConfirm: function () {
                $.ajax({
                    url: base_url + "umum/daftar/hapus",
                    type: "POST",
                    data: { id: $id}
                })
                        .done(function (data) {
                            swal.fire({
                                title: "Hapus",
                                text: "Data Telah Terhapus!",
                                type: "success",
                                preConfirm: function () {
                                    location.href = base_url + "umum/daftar";
                                }
                            });
                        })
                        .error(function (data) {
                            swal.fire("Oops", "No connection!", "error");
                        });
            }
        });
    }
    </script>
    
    <?php 

   /**
    * Load js from loader core
    *
    * @return CI_OUTPUT
    **/
   if(isset($js) ==! FALSE) : foreach($js as $file) :  ?>
<script src="<?php echo $file; ?>"></script>
   <?php endforeach; endif; ?>
    
  </body>
</html>
